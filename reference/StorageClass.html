<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>StorageClass R6 class — StorageClass • shinystate</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="StorageClass R6 class — StorageClass"><meta name="description" content="This class provides a set of methods to create and manage Shiny bookmarkable
state files."><meta property="og:description" content="This class provides a set of methods to create and manage Shiny bookmarkable
state files."><meta property="og:image" content="https://rpodcast.github.io/shinystate/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">shinystate</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/shinystate.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/bookmark-module.html">Bookmark Modules Example</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rpodcast/shinystate/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>StorageClass R6 class</h1>
      <small class="dont-index">Source: <a href="https://github.com/rpodcast/shinystate/blob/main/R/storageclass.R" class="external-link"><code>R/storageclass.R</code></a></small>
      <div class="d-none name"><code>StorageClass.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This class provides a set of methods to create and manage Shiny bookmarkable
state files.</p>
    </div>


    <div class="section level2">
    <h2 id="public-fields">Public fields<a class="anchor" aria-label="anchor" href="#public-fields"></a></h2>
    <p></p><div class="r6-fields"><dl><dt><code>local_storage_dir</code></dt>
<dd><p>file path to use for storing bookmarkable state
files. If not specified, a temporary directory on the host system
will be used.</p></dd>


<dt><code>board_sessions</code></dt>
<dd><p>Optional pre-created board object created with the
pins package. If missing, a folder-based pin board will be created using
the <code>local_storage_dir</code> path.</p></dd>


</dl><p></p></div>
    </div>
    <div class="section level2">
    <h2 id="methods">Methods<a class="anchor" aria-label="anchor" href="#methods"></a></h2>

<div class="section">
<h3 id="public-methods">Public methods<a class="anchor" aria-label="anchor" href="#public-methods"></a></h3>

<ul><li><p><a href="#method-StorageClass-new"><code>StorageClass$new()</code></a></p></li>
<li><p><a href="#method-StorageClass-get_sessions"><code>StorageClass$get_sessions()</code></a></p></li>
<li><p><a href="#method-StorageClass-restore"><code>StorageClass$restore()</code></a></p></li>
<li><p><a href="#method-StorageClass-snapshot"><code>StorageClass$snapshot()</code></a></p></li>
<li><p><a href="#method-StorageClass-delete"><code>StorageClass$delete()</code></a></p></li>
<li><p><a href="#method-StorageClass-register_metadata"><code>StorageClass$register_metadata()</code></a></p></li>
<li><p><a href="#method-StorageClass-clone"><code>StorageClass$clone()</code></a></p></li>
</ul></div><p></p><hr><a id="method-StorageClass-new"></a><div class="section">
<h3 id="method-new-">Method <code><a href="https://rdrr.io/r/methods/new.html" class="external-link">new()</a></code><a class="anchor" aria-label="anchor" href="#method-new-"></a></h3>
<p>Initialize a <code>StorageClass</code> object</p><div class="section">
<h4 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va"><a href="../reference/StorageClass.html">StorageClass</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>local_storage_dir <span class="op">=</span> <span class="cn">NULL</span>, board_sessions <span class="op">=</span> <span class="cn">NULL</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h4>
<p></p><div class="arguments"><dl><dt><code>local_storage_dir</code></dt>
<dd><p>file path to use for storing bookmarkable state
files. If not specified, a temporary directory on the host system
will be used.</p></dd>


<dt><code>board_sessions</code></dt>
<dd><p>Optional pre-created board object created with the
pins package. If missing, a folder-based pin board will be created using
the <code>local_storage_dir</code> path.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="returns">Returns<a class="anchor" aria-label="anchor" href="#returns"></a></h4>
<p>An object with class <code>StorageClass</code> and the methods described
in this documentation</p>
</div>
<div class="section">
<h4 id="examples">Examples<a class="anchor" aria-label="anchor" href="#examples"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="co">## Only run examples in interactive R sessions</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span><span class="co"># beginning of application</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpodcast.github.io/shinystate/">shinystate</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a StorageClass object with default settings</span></span>
<span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/StorageClass.html">StorageClass</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Use a pre-specified directory to store state files</span></span>
<span><span class="co"># For purposes of this example, use a temporary directory</span></span>
<span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/StorageClass.html">StorageClass</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>local_storage_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># use a custom pins board to store bookmarkable state data</span></span>
<span><span class="co"># For purposes of this example, use a temporary directory</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pins.rstudio.com/" class="external-link">pins</a></span><span class="op">)</span></span>
<span><span class="va">board</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://pins.rstudio.com/reference/board_folder.html" class="external-link">board_temp</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/StorageClass.html">StorageClass</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>board_sessions <span class="op">=</span> <span class="va">board</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-StorageClass-get_sessions"></a><div class="section">
<h3 id="method-get-sessions-">Method <code>get_sessions()</code><a class="anchor" aria-label="anchor" href="#method-get-sessions-"></a></h3>
<p>Obtain saved bookmarkable state session metadata</p>
<p>Calls <code>$get_sessions()</code> on the <code>StorageClass</code> object to extract
the bookmarkable state session metadata. You can leverage this data
frame in your Shiny application to let the user manage their existing
bookmarkable state sessions, for example.</p><div class="section">
<h4 id="usage-1">Usage<a class="anchor" aria-label="anchor" href="#usage-1"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">StorageClass</span><span class="op">$</span><span class="fu">get_sessions</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="returns-1">Returns<a class="anchor" aria-label="anchor" href="#returns-1"></a></h4>
<p>data frame of bookmarkable session metadata if at least one
bookmarkable state session has been saved. Otherwise, the return
object will be <code>NULL</code>.</p>
</div>
<div class="section">
<h4 id="examples-1">Examples<a class="anchor" aria-label="anchor" href="#examples-1"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="co">## Only run examples in interactive R sessions</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpodcast.github.io/shinystate/">shinystate</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a StorageClass object with default settings</span></span>
<span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/StorageClass.html">StorageClass</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obtain session data</span></span>
<span><span class="va">storage</span><span class="op">$</span><span class="fu">get_sessions</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-StorageClass-restore"></a><div class="section">
<h3 id="method-restore-">Method <code>restore()</code><a class="anchor" aria-label="anchor" href="#method-restore-"></a></h3>
<p>Restore a previous bookmarkable state session</p><div class="section">
<h4 id="usage-2">Usage<a class="anchor" aria-label="anchor" href="#usage-2"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">StorageClass</span><span class="op">$</span><span class="fu">restore</span><span class="op">(</span><span class="va">url</span>, session <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/domains.html" class="external-link">getDefaultReactiveDomain</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-1">Arguments<a class="anchor" aria-label="anchor" href="#arguments-1"></a></h4>
<p></p><div class="arguments"><dl><dt><code>url</code></dt>
<dd><p>character with the unique URL assigned to the bookmarkable
state session.</p></dd>


<dt><code>session</code></dt>
<dd><p>The Shiny session to associate with the restore operation</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="examples-2">Examples<a class="anchor" aria-label="anchor" href="#examples-2"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="co">## Only run examples in interactive R sessions</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpodcast.github.io/shinystate/">shinystate</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a StorageClass object with default settings</span></span>
<span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/StorageClass.html">StorageClass</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obtain session data</span></span>
<span><span class="va">session_df</span> <span class="op">&lt;-</span> <span class="va">storage</span><span class="op">$</span><span class="fu">get_sessions</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># restore state</span></span>
<span><span class="co"># typically run inside a shiny observe or observeEvent call</span></span>
<span><span class="va">storage</span><span class="op">$</span><span class="fu">restore</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">session_df</span><span class="op">$</span><span class="va">url</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-StorageClass-snapshot"></a><div class="section">
<h3 id="method-snapshot-">Method <code>snapshot()</code><a class="anchor" aria-label="anchor" href="#method-snapshot-"></a></h3>
<p>Create a snapshot of bookmarkable state</p><div class="section">
<h4 id="usage-3">Usage<a class="anchor" aria-label="anchor" href="#usage-3"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">StorageClass</span><span class="op">$</span><span class="fu">snapshot</span><span class="op">(</span></span>
<span>  session_metadata <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  session <span class="op">=</span> <span class="fu">shiny</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/domains.html" class="external-link">getDefaultReactiveDomain</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-2">Arguments<a class="anchor" aria-label="anchor" href="#arguments-2"></a></h4>
<p></p><div class="arguments"><dl><dt><code>session_metadata</code></dt>
<dd><p>Optional named list of additional variables to
include with the default bookmarkable state attributes when creating
the snapshot. Each element of the list must be a single-length item</p></dd>


<dt><code>session</code></dt>
<dd><p>The Shiny session to associate with the snapshot operation</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="examples-3">Examples<a class="anchor" aria-label="anchor" href="#examples-3"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="co">## Only run examples in interactive R sessions</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpodcast.github.io/shinystate/">shinystate</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a StorageClass object with default settings</span></span>
<span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/StorageClass.html">StorageClass</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># save state with timestamp as metadata</span></span>
<span><span class="co"># typically run inside a shiny observe or observeEvent call</span></span>
<span><span class="va">storage</span><span class="op">$</span><span class="fu">snapshot</span><span class="op">(</span>session_metadata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-StorageClass-delete"></a><div class="section">
<h3 id="method-delete-">Method <code>delete()</code><a class="anchor" aria-label="anchor" href="#method-delete-"></a></h3>
<p>Delete a previous snapshot of bookmarkable state</p><div class="section">
<h4 id="usage-4">Usage<a class="anchor" aria-label="anchor" href="#usage-4"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">StorageClass</span><span class="op">$</span><span class="fu">delete</span><span class="op">(</span><span class="va">url</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-3">Arguments<a class="anchor" aria-label="anchor" href="#arguments-3"></a></h4>
<p></p><div class="arguments"><dl><dt><code>url</code></dt>
<dd><p>character with the unique URL assigned to the bookmarkable
state session.</p></dd>


</dl><p></p></div>
</div>
<div class="section">
<h4 id="examples-4">Examples<a class="anchor" aria-label="anchor" href="#examples-4"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="co">## Only run examples in interactive R sessions</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpodcast.github.io/shinystate/">shinystate</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a StorageClass object with default settings</span></span>
<span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/StorageClass.html">StorageClass</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># obtain session data</span></span>
<span><span class="va">session_df</span> <span class="op">&lt;-</span> <span class="va">storage</span><span class="op">$</span><span class="fu">get_sessions</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># delete a session</span></span>
<span><span class="co"># typically run inside a shiny observe or observeEvent call</span></span>
<span><span class="va">storage</span><span class="op">$</span><span class="fu">delete</span><span class="op">(</span><span class="va">session_df</span><span class="op">$</span><span class="va">url</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="op">}</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-StorageClass-register_metadata"></a><div class="section">
<h3 id="method-register-metadata-">Method <code>register_metadata()</code><a class="anchor" aria-label="anchor" href="#method-register-metadata-"></a></h3>
<p>Register bookmarkable state storage data collection</p>
<p>This method must be called in the application server function to
perform the necessary customizations to bookmarkable state methods.
This function is meant to be called near the beginning of the Shiny
application server function.</p><div class="section">
<h4 id="usage-5">Usage<a class="anchor" aria-label="anchor" href="#usage-5"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">StorageClass</span><span class="op">$</span><span class="fu">register_metadata</span><span class="op">(</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="examples-5">Examples<a class="anchor" aria-label="anchor" href="#examples-5"></a></h4>
<p></p><div class="r example copy"><div class="sourceCode"><pre><code><span><span class="co">## Only run examples in interactive R sessions</span></span>
<span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpodcast.github.io/shinystate/">shinystate</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create a StorageClass object with default settings</span></span>
<span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va"><a href="../reference/StorageClass.html">StorageClass</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># application server code</span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">storage</span><span class="op">$</span><span class="fu">register_metadata</span><span class="op">(</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span><span class="op">}</span></span></code></pre></div><p></p></div>
</div>


</div><p></p><hr><a id="method-StorageClass-clone"></a><div class="section">
<h3 id="method-clone-">Method <code>clone()</code><a class="anchor" aria-label="anchor" href="#method-clone-"></a></h3>
<p>The objects of this class are cloneable with this method.</p><div class="section">
<h4 id="usage-6">Usage<a class="anchor" aria-label="anchor" href="#usage-6"></a></h4>
<p></p><div class="r"><div class="sourceCode"><pre><code><span><span class="va">StorageClass</span><span class="op">$</span><span class="fu">clone</span><span class="op">(</span>deep <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span></code></pre></div><p></p></div>
</div>

<div class="section">
<h4 id="arguments-4">Arguments<a class="anchor" aria-label="anchor" href="#arguments-4"></a></h4>
<p></p><div class="arguments"><dl><dt><code>deep</code></dt>
<dd><p>Whether to make a deep clone.</p></dd>


</dl><p></p></div>
</div>

</div>

    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `StorageClass$new`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Only run examples in interactive R sessions</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># beginning of application</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpodcast.github.io/shinystate/">shinystate</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a StorageClass object with default settings</span></span></span>
<span class="r-in"><span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va">StorageClass</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Use a pre-specified directory to store state files</span></span></span>
<span class="r-in"><span><span class="co"># For purposes of this example, use a temporary directory</span></span></span>
<span class="r-in"><span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va">StorageClass</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>local_storage_dir <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use a custom pins board to store bookmarkable state data</span></span></span>
<span class="r-in"><span><span class="co"># For purposes of this example, use a temporary directory</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pins.rstudio.com/" class="external-link">pins</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">board</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://pins.rstudio.com/reference/board_folder.html" class="external-link">board_temp</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va">StorageClass</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>board_sessions <span class="op">=</span> <span class="va">board</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `StorageClass$get_sessions`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Only run examples in interactive R sessions</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpodcast.github.io/shinystate/">shinystate</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a StorageClass object with default settings</span></span></span>
<span class="r-in"><span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va">StorageClass</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># obtain session data</span></span></span>
<span class="r-in"><span><span class="va">storage</span><span class="op">$</span><span class="fu">get_sessions</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `StorageClass$restore`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Only run examples in interactive R sessions</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpodcast.github.io/shinystate/">shinystate</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a StorageClass object with default settings</span></span></span>
<span class="r-in"><span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va">StorageClass</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># obtain session data</span></span></span>
<span class="r-in"><span><span class="va">session_df</span> <span class="op">&lt;-</span> <span class="va">storage</span><span class="op">$</span><span class="fu">get_sessions</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># restore state</span></span></span>
<span class="r-in"><span><span class="co"># typically run inside a shiny observe or observeEvent call</span></span></span>
<span class="r-in"><span><span class="va">storage</span><span class="op">$</span><span class="fu">restore</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">tail</a></span><span class="op">(</span><span class="va">session_df</span><span class="op">$</span><span class="va">url</span>, n <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `StorageClass$snapshot`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Only run examples in interactive R sessions</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpodcast.github.io/shinystate/">shinystate</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a StorageClass object with default settings</span></span></span>
<span class="r-in"><span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va">StorageClass</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># save state with timestamp as metadata</span></span></span>
<span class="r-in"><span><span class="co"># typically run inside a shiny observe or observeEvent call</span></span></span>
<span class="r-in"><span><span class="va">storage</span><span class="op">$</span><span class="fu">snapshot</span><span class="op">(</span>session_metadata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>time <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.time.html" class="external-link">Sys.time</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `StorageClass$delete`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Only run examples in interactive R sessions</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpodcast.github.io/shinystate/">shinystate</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a StorageClass object with default settings</span></span></span>
<span class="r-in"><span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va">StorageClass</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># obtain session data</span></span></span>
<span class="r-in"><span><span class="va">session_df</span> <span class="op">&lt;-</span> <span class="va">storage</span><span class="op">$</span><span class="fu">get_sessions</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># delete a session</span></span></span>
<span class="r-in"><span><span class="co"># typically run inside a shiny observe or observeEvent call</span></span></span>
<span class="r-in"><span><span class="va">storage</span><span class="op">$</span><span class="fu">delete</span><span class="op">(</span><span class="va">session_df</span><span class="op">$</span><span class="va">url</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">## Method `StorageClass$register_metadata`</span></span></span>
<span class="r-in"><span><span class="co">## ------------------------------------------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">## Only run examples in interactive R sessions</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/interactive.html" class="external-link">interactive</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://rpodcast.github.io/shinystate/">shinystate</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Create a StorageClass object with default settings</span></span></span>
<span class="r-in"><span><span class="va">storage</span> <span class="op">&lt;-</span> <span class="va">StorageClass</span><span class="op">$</span><span class="fu">new</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># application server code</span></span></span>
<span class="r-in"><span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="va">storage</span><span class="op">$</span><span class="fu">register_metadata</span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Eric Nantz, Eli Lilly and Company.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer></div>





  </body></html>

